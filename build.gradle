plugins {
	id 'java'
	id 'eclipse'
}
targetCompatibility = 1.8
sourceCompatibility = 1.8
repositories {
	mavenCentral()
	maven {
		url = 'https://hub.spigotmc.org/nexus/content/repositories/snapshots/'
		name = 'spigot'
		content {
			includeGroup 'org.bukkit'
			includeGroup 'org.spigotmc'
		}
	}
	maven {
		url = 'https://oss.sonatype.org/content/repositories/snapshots'
	}
	mavenLocal()
}
dependencies {
	// Unfortunately, needed for NMS access
	// Change this to the path to your Spigot jar
	compileOnly files("/home/redempt/Desktop/Spigot/1.15/spigot-1.15.2.jar")
}
sourceSets {
	main {
		java {
			srcDir 'src'
		}
		resources {
			srcDir 'res'
		}
	}
}
task updateJars {
	doLast {
		copy {
			from 'build/libs'
			into '/home/redempt/Desktop/Spigot/1.8/plugins'
		}
		copy {
			from 'build/libs'
			into '/home/redempt/Desktop/Spigot/1.11/plugins'
		}
		copy {
			from 'build/libs'
			into '/home/redempt/Desktop/Spigot/1.12/plugins'
		}
		copy {
			from 'build/libs'
			into '/home/redempt/Desktop/Spigot/1.13/plugins'
		}
		copy {
			from 'build/libs'
			into '/home/redempt/Desktop/Spigot/1.14/plugins'
		}
		copy {
			from 'build/libs'
			into '/home/redempt/Desktop/Spigot/1.15/plugins'
		}
	}
}
task javadocJar(type: Jar, dependsOn: javadoc) {
	from javadoc.destinationDir
	archiveClassifier='javadoc'
}
task deploy(dependsOn: ["jar", "updateJars"]) {
	updateJars.mustRunAfter jar
}